{% extends "base.html" %}

{% block content %}
<style>
table { width: 100%; }
td { vertical-align: top; }
.body { white-space: pre-wrap; }
.message strong { cursor: default; }

.col-author { width: 230px; }
.col-when { width: 130px; }
</style>
  <h1>Opera Software upstreamed commits</h1>
  <p>Click message to expand
  {% for project in projects %}
    <section class="{{ project.name|lower }}">
      <h2>{{ project.name }}</h2>
      <table>
      <colgroup class=col-author>
      <colgroup class=col-message>
      <colgroup class=col-when>
      <tr><th>Author <th>Message <th>When
      {% for c in project.log %}
        <tr>
          <td>{{ c.author_stripped }}
          <td class=message><strong>{{ c.subject|e }}</strong>
            <pre class=body style=display:none>{{ c.body|e }}</pre>
          <td><a href='{{ c.viewvc }}'><time datetime='{{ c.date }}' title='{{ c.date }}'>{{ c.date }}</time></a>
      {% endfor %}
      </table>
    </section>
  {% endfor %}

  <script>
    var messages = document.querySelectorAll('.message');
    for (var i=0; i<messages.length; i++)
    {
      messages[i].addEventListener('click', function()
      {
        body = this.querySelector('.body');
        if (body.style.display == 'none')
            body.style.display = 'block';
        else
            body.style.display = 'none';
      });
    }
  </script>
{% endblock %}
